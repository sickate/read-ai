# Changelog

# æ›´æ–°æ—¥å¿— / Change Log

## 2025-10-06 - ç»Ÿä¸€å“åº”å¼Headerè®¾è®¡

### ğŸ¨ ç•Œé¢ä¼˜åŒ–
- **ç»Ÿä¸€Headerç»„ä»¶**: é‡æ–°è®¾è®¡ `_navigation.html` ä¸ºå®Œæ•´çš„å“åº”å¼header
- **å“ç‰Œè§†è§‰å‡çº§**: æ·»åŠ "è¶…èƒ½åŠ›è®­ç»ƒåœº"å“ç‰Œæ ‡è¯†å’Œç«ç®­å›¾æ ‡
- **ç°ä»£åŒ–è®¾è®¡**: ç´«è‰²æ¸å˜èƒŒæ™¯ (#667eea â†’ #764ba2)ï¼Œæå‡è§†è§‰å±‚æ¬¡

### ğŸ“± å“åº”å¼æ”¯æŒ
- **Desktopå¸ƒå±€**: æ°´å¹³å¯¼èˆªæ ï¼Œèœå•é å³å¯¹é½
- **iPadä¼˜åŒ–**: æ±‰å ¡èœå• + å¯æŠ˜å å¯¼èˆª
- **iPhoneé€‚é…**: ç´§å‡‘å¸ƒå±€ï¼Œè§¦æ‘¸å‹å¥½çš„æŒ‰é’®å°ºå¯¸

### âœ¨ äº¤äº’ä½“éªŒ
- **å½“å‰é¡µé¢é«˜äº®**: è‡ªåŠ¨æ ‡è®°ç”¨æˆ·æ‰€åœ¨é¡µé¢
- **æ‚¬åœåŠ¨ç”»**: èœå•é¡¹ä¸Šç§»æ•ˆæœå’ŒåŠé€æ˜èƒŒæ™¯
- **å“ç‰Œå¯ç‚¹å‡»**: Logoç‚¹å‡»è¿”å›é¦–é¡µ
- **å›¾æ ‡æ”¯æŒ**: æ‰€æœ‰èœå•é¡¹é…å¤‡FontAwesomeå›¾æ ‡

### ğŸ”§ æŠ€æœ¯æ”¹è¿›
- ç§»é™¤å„é¡µé¢ç‹¬ç«‹çš„h1æ ‡é¢˜ï¼Œé¿å…é‡å¤
- ç»Ÿä¸€ä½¿ç”¨ `current_page` å‚æ•°æ§åˆ¶é«˜äº®çŠ¶æ€
- åŸºäºBootstrap 5 navbarç»„ä»¶ï¼Œç¡®ä¿è·¨æµè§ˆå™¨å…¼å®¹æ€§
- ä¼˜åŒ–é¡µé¢é—´è·å’Œå¸ƒå±€ä¸€è‡´æ€§

### ğŸ“„ å½±å“æ–‡ä»¶
- `app/templates/_navigation.html` - é‡æ„ä¸ºå®Œæ•´headerç»„ä»¶
- `app/templates/index.html` - Headerç½®é¡¶ï¼Œç§»é™¤ç‹¬ç«‹æ ‡é¢˜
- `app/templates/tts.html` - Headerç½®é¡¶ï¼Œç§»é™¤ç‹¬ç«‹æ ‡é¢˜
- `app/templates/game_24.html` - Headerç½®é¡¶ï¼Œç§»é™¤ç‹¬ç«‹æ ‡é¢˜
- `app/templates/word_counter.html` - Headerç½®é¡¶ï¼Œç§»é™¤ç‹¬ç«‹æ ‡é¢˜

---

## 2025-09-16 - Geminiæµå¼ä¼ è¾“æ”¯æŒä¸APIä¿®å¤

### ğŸš€ é‡å¤§æ›´æ–°
- **å®Œå…¨ä¿®å¤Geminiæ¨¡å‹è¿æ¥é—®é¢˜**: è§£å†³"æ–°çš„ gemini modelæŠ¥é”™"é—®é¢˜
- **çœŸæ­£çš„æµå¼ä¼ è¾“æ”¯æŒ**: å®ç°Gemini APIçš„çœŸæ­£æµå¼è¾“å‡º
- **æ™ºèƒ½æµå¼è§£æ**: æ”¯æŒJSONæ•°ç»„æµæ ¼å¼çš„å®æ—¶è§£æ

### ğŸ”§ æŠ€æœ¯æ”¹è¿›
- **è‡ªå®šä¹‰Geminiå®¢æˆ·ç«¯**: åˆ›å»ºGeminiClientåŒ…è£…å™¨ï¼Œå…¼å®¹OpenAIæ¥å£
- **æµå¼ç«¯ç‚¹ä¼˜åŒ–**: ä½¿ç”¨streamGenerateContentç«¯ç‚¹å®ç°çœŸæ­£çš„æµå¼ä¼ è¾“
- **å¢é‡JSONè§£æ**: å®ç°é€æ­¥è§£æJSONæ•°ç»„æµçš„ç®—æ³•
- **APIé…ç½®ä¿®å¤**: ä¿®æ­£GeminiProviderçš„base_urlé…ç½®

### ğŸ“ è¯¦ç»†å˜æ›´
- ä¿®å¤providers.pyä¸­çš„GeminiProvideré…ç½®
- å®ç°çœŸæ­£çš„æµå¼å“åº”å¤„ç†ï¼Œæ”¯æŒé€å—æ–‡æœ¬è¾“å‡º
- æ·»åŠ JSONæ•°ç»„æµè§£æå™¨ï¼Œå¤„ç†Geminiç‰¹æœ‰çš„å“åº”æ ¼å¼
- ä¿æŒå‘åå…¼å®¹æ€§ï¼ŒåŒæ­¥APIä»æ­£å¸¸å·¥ä½œ

### ğŸ§ª æµ‹è¯•éªŒè¯
- åŒæ­¥APIï¼šâœ… æ­£å¸¸å·¥ä½œ
- æµå¼APIï¼šâœ… çœŸæ­£çš„å®æ—¶è¾“å‡º
- é”™è¯¯å¤„ç†ï¼šâœ… å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶

---

## 2025-09-16 - å¤šè¯­è¨€ä½œæ–‡æ‰¹æ”¹ç³»ç»Ÿå‡çº§

### ä¸»è¦æ›´æ–°
- **å¤šè¯­è¨€æ”¯æŒ**: æ–°å¢è‹±è¯­å’Œè¥¿ç­ç‰™è¯­ä½œæ–‡æ‰¹æ”¹åŠŸèƒ½
- **æ™ºèƒ½æ¨¡å‹é€‰æ‹©**: æ ¹æ®æœåŠ¡å™¨ç¯å¢ƒè‡ªåŠ¨é€‰æ‹©æœ€ä¼˜LLMæ¨¡å‹
- **ç•Œé¢ä¼˜åŒ–**: è°ƒæ•´å¸ƒå±€ï¼Œæ–°å¢AIæ€è€ƒè¿‡ç¨‹å¯è§†åŒ–é¢æ¿
- **å‰ç«¯ä¿®å¤**: ä¿®å¤JavaScripté”™è¯¯ï¼Œå®Œå–„ç”¨æˆ·ä½“éªŒ

### æŠ€æœ¯æ”¹è¿›
- æ·»åŠ Google Gemini 2.5 Flash Liteæ¨¡å‹æ”¯æŒ
- å®ç°åŸºäºhostnameçš„æ™ºèƒ½LLMæä¾›è€…é€‰æ‹©
- ä¼˜åŒ–å¤šè¯­è¨€æ‰¹æ”¹æç¤ºè¯å’Œå“åº”è§£æ
- é‡æ„å‰ç«¯ç•Œé¢å¸ƒå±€å’Œäº¤äº’é€»è¾‘

### è¯¦ç»†åŠŸèƒ½è¯´æ˜
- AIä½œæ–‡æ‰¹æ”¹åŠŸèƒ½è¯¦æƒ…è¯·å‚è€ƒ: [AI_CORRECTION_GUIDE.md](AI_CORRECTION_GUIDE.md)

---

## å†å²ç‰ˆæœ¬

### 2025-03-25 - ä¼˜åŒ–å­—å¹•è´¨é‡
- ä¿®æ­£æ ‡ç‚¹ç¬¦å·ã€å¤§å°å†™å’Œè¯´è¯äººé¢œè‰²åŒºåˆ†

## 2025-03-24 - å¼‚æ­¥å­—å¹•ä¼˜åŒ–
- å®ç°å¼‚æ­¥å­—å¹•ä¼˜åŒ–åŠŸèƒ½ï¼Œæå‡ç”¨æˆ·ä½“éªŒ

## 2025-03-23 - ç§»åŠ¨ç«¯ä¼˜åŒ–
- ç§»é™¤24ç‚¹æ¸¸æˆé¡µé¢è‡ªåŠ¨èšç„¦è¡Œä¸ºï¼Œä¼˜åŒ–ç§»åŠ¨ç«¯ç”¨æˆ·ä½“éªŒ

## 2025-03-22 - éƒ¨ç½²ä¼˜åŒ–
- ä¿®å¤Fabricéƒ¨ç½²è¶…æ—¶é—®é¢˜

## 2025-03-21 - AIæ‰¹æ”¹ä¼˜åŒ–
- å…¨é¢ä¼˜åŒ–AIæ‰¹æ”¹æµå¼å“åº”å¤„ç†

## [2025-10-06] æ–°å¢åœ¨çº¿æœ—è¯»åŠŸèƒ½

### æ–°å¢åŠŸèƒ½
- **åœ¨çº¿æœ—è¯» (Text-to-Speech)**: æ”¯æŒä¸­è‹±æ–‡æ–‡æœ¬è½¬è¯­éŸ³ï¼Œå¤šç§éŸ³è‰²å¯é€‰
  - è®¿é—®è·¯å¾„: `/tts`
  - API ç«¯ç‚¹: `/api/text-to-speech`

### æŠ€æœ¯å®ç°
- **API æä¾›å•†**: é˜¿é‡Œäº‘ DashScope Qwen3-TTS
  - æ¨¡å‹: `qwen3-tts-flash`
  - æˆæœ¬: 0.8å…ƒ/ä¸‡å­—ç¬¦
  - éŸ³è´¨: æ¥è¿‘çœŸäººï¼Œè‡ªç„¶éŸµå¾‹

- **éŸ³è‰²æ”¯æŒ** (8ç§å¸¸ç”¨éŸ³è‰²):
  - Cherry - äº²åˆ‡è‡ªç„¶ï¼ˆå¥³å£°ï¼‰
  - longxiaochun - é˜³å…‰ç§¯æ
  - zhibei - å¯é æˆç†Ÿ
  - zhitian - æ¸©æŸ”çŸ¥æ€§
  - longwan - äºŒæ¬¡å…ƒè™šæ‹Ÿå¥³å‹
  - longxiaoxia - æ´»æ³¼å°‘å¥³
  - longjing - æ²‰ç¨³ä¸“ä¸šï¼ˆç”·å£°ï¼‰
  - longxiaobei - åŒ—äº¬éŸ³

- **è¯­è¨€æ”¯æŒ** (8ç§è¯­è¨€):
  - è‡ªåŠ¨æ£€æµ‹ (Auto)
  - ä¸­æ–‡ (Chinese)
  - è‹±æ–‡ (English)
  - æ—¥è¯­ (Japanese)
  - éŸ©è¯­ (Korean)
  - è¥¿ç­ç‰™è¯­ (Spanish)
  - æ³•è¯­ (French)
  - å¾·è¯­ (German)

### æ ¸å¿ƒæ–‡ä»¶
- `app/llm/tts_helper.py` - TTS è¾…åŠ©æ¨¡å—
  - `text_to_speech()` - æ–‡æœ¬è½¬è¯­éŸ³æ ¸å¿ƒå‡½æ•°
  - `get_available_voices()` - è·å–å¯ç”¨éŸ³è‰²åˆ—è¡¨
  - `get_available_languages()` - è·å–å¯ç”¨è¯­è¨€åˆ—è¡¨

- `app/__init__.py` - æ–°å¢è·¯ç”±
  - `@app.route('/tts')` - åœ¨çº¿æœ—è¯»é¡µé¢
  - `@app.route('/api/text-to-speech')` - TTS API æ¥å£

- `app/templates/tts.html` - å‰ç«¯é¡µé¢
  - Bootstrap 5 å“åº”å¼è®¾è®¡
  - å®æ—¶å­—ç¬¦è®¡æ•° (0-5000)
  - éŸ³é¢‘æ’­æ”¾å™¨é›†æˆ
  - è‡ªåŠ¨æ’­æ”¾ç”Ÿæˆçš„éŸ³é¢‘

- `app/templates/_navigation.html` - å¯¼èˆªæ æ›´æ–°
  - æ·»åŠ "åœ¨çº¿æœ—è¯»"å…¥å£

### åŠŸèƒ½ç‰¹æ€§
1. **æ–‡æœ¬è¾“å…¥**: æ”¯æŒæœ€å¤š 5000 å­—ç¬¦
2. **ä¸­è‹±æ··åˆ**: å¯åœ¨åŒä¸€æ–‡æœ¬ä¸­æ··åˆä½¿ç”¨ä¸­è‹±æ–‡ï¼Œè‡ªåŠ¨åˆ‡æ¢å‘éŸ³
3. **å®æ—¶åé¦ˆ**: å­—ç¬¦è®¡æ•°ã€åŠ è½½çŠ¶æ€ã€é”™è¯¯æç¤º
4. **éŸ³é¢‘æ’­æ”¾**: ç”Ÿæˆçš„éŸ³é¢‘ URL 24 å°æ—¶æœ‰æ•ˆï¼Œæ”¯æŒåœ¨çº¿æ’­æ”¾
5. **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡

### ä¾èµ–æ›´æ–°
- å‡çº§ `dashscope` ä» 1.23.2 åˆ° >=1.24.6
  - æ–°ç‰ˆæœ¬æ”¯æŒ `qwen3-tts-flash` æ¨¡å‹
  - ä¿®å¤ MultiModalConversation.call() API è°ƒç”¨

### æµ‹è¯•éªŒè¯
- âœ… TTS helper æ¨¡å—å•å…ƒæµ‹è¯•
- âœ… API æ¥å£åŠŸèƒ½æµ‹è¯•
- âœ… Web ç•Œé¢å®Œæ•´æµç¨‹æµ‹è¯•
- âœ… ä¸­è‹±æ··åˆæ–‡æœ¬æœ—è¯»æµ‹è¯•

### ä½¿ç”¨ç¤ºä¾‹

#### Python API è°ƒç”¨
```python
from app.llm.tts_helper import text_to_speech

result = text_to_speech(
    text="Hello! ä½ å¥½ï¼Œè¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ã€‚",
    voice="Cherry",
    language="Auto"
)

if result['success']:
    print(f"Audio URL: {result['audio_url']}")
```

#### HTTP API è°ƒç”¨
```bash
curl -X POST http://localhost:5010/api/text-to-speech \
  -H "Content-Type: application/json" \
  -d '{"text":"Hello test","voice":"Cherry","language":"Auto"}'
```

### æ³¨æ„äº‹é¡¹
- éœ€è¦é…ç½® `DASHSCOPE_API_KEY` ç¯å¢ƒå˜é‡
- éŸ³é¢‘ URL æœ‰æ•ˆæœŸä¸º 24 å°æ—¶
- å•æ¬¡è¯·æ±‚æœ€å¤§æ”¯æŒ 5000 å­—ç¬¦
- å»ºè®®æ–‡æœ¬è¯­è¨€ä¸ `language_type` å‚æ•°ä¸€è‡´ä»¥è·å¾—æœ€ä½³æ•ˆæœ
