# AI作文批改功能使用指南

## 功能概述

AI作文批改功能基于阿里云Deepseek-R1模型，为您的作文提供专业的批改建议。该功能具有以下特点：

- 🔍 **智能检测**：自动识别病句、错别字、标点符号错误
- 📝 **详细建议**：提供语言表达和内容结构的改进建议
- 🔄 **实时反馈**：显示AI的思考过程，让您了解批改的进展
- 📱 **响应式设计**：支持PC端和移动端使用
- 🎯 **防抄袭设计**：只提供修改建议，不直接给出修改后的原文

## 使用方法

### 1. 访问页面
访问 `/word-counter` 页面，即可看到作文字数统计和AI批改功能。

### 2. 输入作文
在左侧的文本框中输入您的作文内容（至少50个字符）。

### 3. 开始批改
点击"AI批改"按钮，系统将：
- 显示AI思考过程面板
- 实时展示AI的分析进展
- 最终显示详细的批改结果

### 4. 查看结果
批改结果按以下类别展示：
- 🔶 **病句修改**：语法错误、表达不当
- 🔴 **错别字修改**：错字、别字纠正
- 🔵 **标点符号修改**：标点使用错误
- 💡 **语言表达改进建议**：提升表达质量
- 📋 **内容结构改进建议**：优化文章结构

## 界面功能

### AI思考过程面板
- **可折叠设计**：点击标题栏可收起/展开面板
- **实时输出**：显示AI的思考过程和分析进展
- **滚动显示**：自动滚动到最新内容
- **清空功能**：点击"清空输出"可清除历史记录

### 批改结果展示
- **手风琴式展示**：分类显示不同类型的问题
- **统计信息**：显示发现的问题总数
- **详细建议**：每个问题都有具体的修改建议

## 技术特点

### 流式输出
- 使用Fetch Stream API实现实时数据传输
- 支持断线重连和错误处理
- 兼容现代浏览器

### 响应式设计
- 移动端优化布局
- 自适应屏幕尺寸
- 触摸友好的交互设计

### 用户体验
- 动画效果增强视觉体验
- 加载状态提示
- 错误处理和重试机制

## 注意事项

1. **网络要求**：需要稳定的网络连接，AI批改可能需要10-30秒
2. **内容要求**：作文内容至少50个字符
3. **API配置**：需要正确配置阿里云API密钥
4. **浏览器兼容**：建议使用Chrome、Firefox、Safari等现代浏览器

## 故障排除

### 常见问题

**Q: AI批改按钮点击后没有反应？**
A: 检查网络连接，确保作文内容至少50个字符，刷新页面重试。

**Q: 思考过程面板一直显示"等待AI开始批改"？**
A: 可能是API配置问题，检查阿里云API密钥是否正确配置。

**Q: 批改过程中断了？**
A: 系统会自动降级到普通API，或刷新页面重新尝试。

**Q: 移动端显示不正常？**
A: 确保使用现代浏览器，并允许JavaScript运行。

### 技术支持
如果遇到问题，请查看：
1. 浏览器控制台错误信息
2. 网络连接状态
3. API配置是否正确

## 测试

运行测试脚本验证功能：
```bash
python test_ai_correction.py
```

测试包括：
- 普通API功能测试
- 流式API功能测试
- 错误处理测试

## 更新日志

### v1.0.0
- ✅ 基础AI批改功能
- ✅ 实时思考过程显示
- ✅ 响应式设计
- ✅ 流式输出支持
- ✅ 错误处理和重试机制 